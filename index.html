<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Landara Club</title>
  <link rel="stylesheet" href="style.css" />
  <!--
    Hero images: using the images uploaded to assets/
    - assets/Screenshot 2025-12-10 at 18.02.27.png
    - assets/Screenshot 2025-12-10 at 18.03.27.png
  -->
</head>
<body>
  <a class="sr-only" href="#main">Saltar al contenido</a>

  <header class="site-header" role="banner">
    <div class="container header-inner">
      <div class="brand">
        <span class="brand-mark" aria-hidden="true">L</span>
        <span class="brand-name">Landara Club</span>
        <small class="brand-sub">Private Office</small>
      </div>

      <nav class="nav" role="navigation" aria-label="Main">
        <a href="#philosophy">Philosophy</a>
        <a href="#services">Services</a>
        <a href="#bi">Business Intelligence</a>
        <a href="#invitation">Invitation</a>
      </nav>

      <div class="header-actions">
        <button id="slideshowToggle" class="btn btn--small" aria-pressed="false">Pause Slideshow</button>
      </div>
    </div>
  </header>

  <header class="hero" role="banner" aria-label="Hero">
    <video id="heroVideo" class="hero__video" autoplay muted loop playsinline aria-hidden="true">
      <source src="assets/video.mp4" type="video/mp4" />
    </video>

    <div class="hero__slideshow" id="heroSlideshow" aria-hidden="true" aria-live="polite"></div>
    <div class="hero__overlay"></div>

    <div class="hero__content container">
      <h1 class="site-title">Landara Club</h1>
      <p class="site-sub">Private Office for Investors. Stewardship for investors</p>
      <div class="hero__actions">
        <a class="btn" href="#invitation">Access by invitation</a>
        <a class="btn btn--ghost" href="#bi">Business Intelligence</a>
      </div>
    </div>
  </header>

  <main id="main">
    <!-- (el resto del contenido permanece igual; services / bi / invitation / footer) -->
    <!-- ... -->
  </main>

  <footer class="site-footer" role="contentinfo">
    <div class="container footer__inner">
      <div>
        <small>&copy; <span id="year"></span> Landara Club. All rights reserved.</small>
        <div class="hero-credits">
          <small>Hero images: uploaded by owner</small>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Insert current year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Slides: use the images that are in assets/ (uploaded by you)
    const slides = [
      'assets/Screenshot 2025-12-10 at 18.02.27.png',
      'assets/Screenshot 2025-12-10 at 18.03.27.png'
    ];

    const slideshowContainer = document.getElementById('heroSlideshow');
    let slideEls = [];
    let slideshowInterval = null;
    let current = 0;
    const delay = 6000;
    let userScrolled = false;

    function createSlides() {
      slides.forEach((src, idx) => {
        const s = document.createElement('div');
        s.className = 'slide';

        const img = new Image();
        img.src = encodeURI(src);
        img.onload = () => {
          const ratio = img.naturalWidth / img.naturalHeight;
          let focusY = '50%';
          if (ratio > 1.8) focusY = '35%';
          else if (ratio > 1.3) focusY = '42%';
          s.style.backgroundImage = `url("${encodeURI(src)}")`;
          s.style.backgroundPosition = `center ${focusY}`;
        };
        img.onerror = () => {
          s.style.backgroundImage = `url("${encodeURI(src)}")`;
          s.style.backgroundPosition = 'center 50%';
        };

        if (idx === 0) s.classList.add('is-active');
        slideshowContainer.appendChild(s);
      });

      slideEls = slideshowContainer.querySelectorAll('.slide');
    }

    function showSlide(index) {
      if (!slideEls || slideEls.length === 0) return;
      index = Math.max(0, Math.min(index, slideEls.length - 1));
      slideEls.forEach((el, i) => el.classList.toggle('is-active', i === index));
      current = index;
    }

    function startSlideshow() {
      if (slideshowInterval || userScrolled) return;
      if (slideEls.length <= 1) return;
      slideshowInterval = setInterval(() => {
        const next = (current + 1) % slideEls.length;
        showSlide(next);
      }, delay);
      document.getElementById('slideshowToggle').textContent = 'Pause Slideshow';
      document.getElementById('slideshowToggle').setAttribute('aria-pressed','false');
    }

    function stopSlideshow() {
      clearInterval(slideshowInterval);
      slideshowInterval = null;
      document.getElementById('slideshowToggle').textContent = 'Resume Slideshow';
      document.getElementById('slideshowToggle').setAttribute('aria-pressed','true');
    }

    document.getElementById('slideshowToggle').addEventListener('click', () => {
      if (slideshowInterval) stopSlideshow(); else startSlideshow();
    });

    // Scroll-driven slide: map scroll position to slide index
    function onScrollDrivenSlide() {
      userScrolled = true; // once user scrolls we pause auto-advancing
      if (slideshowInterval) stopSlideshow();
      const doc = document.documentElement;
      const scrollTop = window.pageYOffset || doc.scrollTop;
      const maxScroll = doc.scrollHeight - window.innerHeight;
      const frac = maxScroll > 0 ? (scrollTop / maxScroll) : 0;
      // map fraction to slide index, ensure last slide reachable
      const index = Math.min(slides.length - 1, Math.floor(frac * slides.length));
      showSlide(index);
    }

    // Throttle helper
    function throttle(fn, wait) {
      let last = 0;
      return function(...args) {
        const now = Date.now();
        if (now - last >= wait) { last = now; fn.apply(this, args); }
      };
    }

    // Init
    createSlides();
    setTimeout(() => { slideEls = slideshowContainer.querySelectorAll('.slide'); startSlideshow(); }, 140);
    window.addEventListener('scroll', throttle(onScrollDrivenSlide, 120), { passive: true });

    // Reveal on scroll (resto de la pÃ¡gina)
    function revealOnScroll() {
      const reveals = document.querySelectorAll('.reveal');
      reveals.forEach(el => {
        const rect = el.getBoundingClientRect();
        if (rect.top < window.innerHeight - 80) el.classList.add('is-visible');
      });
    }
    window.addEventListener('scroll', revealOnScroll, {passive: true});

    // BI tabs
    document.querySelectorAll('.bi-tab').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.bi-tab').forEach(b => b.classList.remove('is-active'));
        btn.classList.add('is-active');
        const target = btn.dataset.target;
        document.querySelectorAll('.bi-pane').forEach(p => p.classList.remove('is-active'));
        document.getElementById(target).classList.add('is-active');
      });
    });
  </script>
</body>
</html>
